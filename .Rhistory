geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(180)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 180, ])
+
geom_point(data = baseline_cm(bed_capacity), size = 3, col = "blue")
+
lims(x = c(0, 1))
+
geom_vline(aes(xintercept = ps), data = baseline_cm(bed_capacity))
+
geom_hline(aes(yintercept = du), data = baseline_cm(bed_capacity))
+
labs(#title = "Cumulative mortality at given number of beds",
x = "Probablilty of surving"
, y = "Hospital duration (days)"
, color = "Number of beds")
+
theme_bw()
+
ggeasy::easy_center_title()
)
if(dir.exists("./figs")){
ggsave(filename = target,
plot = plot2,
width = 8.51,
height = 5.67,
units = "in")
}else{
dir.create("./figs")
ggsave(filename = target,
plot = plot2,
width = 8.51,
height = 5.67,
units = "in")
}
plot2
plot2 <- (ggplot()
+
aes(x = ps, y = du, z = cm, color = as.character(cc)
)
+
#geom_contour(breaks = c(min(cum_mortality_df$cm),
#                       baseline_cm(bed_capacity)$cm,
#                      max(cum_mortality_df$cm)),
#          data = cum_mortality_df[cum_mortality_df$cc == bed_capacity, ])
#+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(180)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 180, ])
+
geom_point(data = baseline_cm(bed_capacity), size = 3, col = "blue")
+
lims(x = c(0, 1))
+
geom_vline(aes(xintercept = ps), data = baseline_cm(bed_capacity))
+
geom_hline(aes(yintercept = du), data = baseline_cm(bed_capacity))
+
labs(#title = "Cumulative mortality at given number of beds",
x = "Probablilty of surving"
, y = "Hospital duration (days)"
, color = "Number of beds")
+
theme_bw()
+
ggeasy::easy_center_title()
)
plot2
plot2 <- (ggplot()
+
aes(x = ps, y = du, z = cm, color = as.character(cc)
)
+
#geom_contour(breaks = c(min(cum_mortality_df$cm),
#                       baseline_cm(bed_capacity)$cm,
#                      max(cum_mortality_df$cm)),
#          data = cum_mortality_df[cum_mortality_df$cc == bed_capacity, ])
#+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(180)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 180, ])
+
geom_point(data = baseline_cm(bed_capacity), size = 3, col = "blue")
+
lims(x = c(0, 1))
+
#geom_vline(aes(xintercept = ps), data = baseline_cm(bed_capacity))
#+
geom_hline(aes(yintercept = du), data = baseline_cm(bed_capacity))
+
labs(#title = "Cumulative mortality at given number of beds",
x = "Probablilty of surving"
, y = "Hospital duration (days)"
, color = "Number of beds")
+
theme_bw()
+
ggeasy::easy_center_title()
)
plot2
new_vals
plot2 <- (ggplot()
+
aes(x = ps, y = du, z = cm, color = as.character(cc)
)
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(bed_capacity)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == bed_capacity, ])
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(180)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 120, ])
+
geom_point(data = baseline_cm(bed_capacity), size = 3, col = "blue")
+
lims(x = c(0, 1))
+
geom_vline(aes(xintercept = ps), data = baseline_cm(bed_capacity))
+
geom_hline(aes(yintercept = du), data = baseline_cm(bed_capacity))
+
labs(#title = "Cumulative mortality at given number of beds",
x = "Probablilty of surving"
, y = "Hospital duration (days)"
, color = "Number of beds")
+
theme_bw()
+
ggeasy::easy_center_title()
)
plot2
plot2 <- (ggplot()
+
aes(x = ps, y = du, z = cm, color = as.character(cc)
)
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(bed_capacity)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == bed_capacity, ])
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(180)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 140, ])
+
geom_point(data = baseline_cm(bed_capacity), size = 3, col = "blue")
+
lims(x = c(0, 1))
+
geom_vline(aes(xintercept = ps), data = baseline_cm(bed_capacity))
+
geom_hline(aes(yintercept = du), data = baseline_cm(bed_capacity))
+
labs(#title = "Cumulative mortality at given number of beds",
x = "Probablilty of surving"
, y = "Hospital duration (days)"
, color = "Number of beds")
+
theme_bw()
+
ggeasy::easy_center_title()
)
plot2
plot2 <- (ggplot()
+
aes(x = ps, y = du, z = cm, color = as.character(cc)
)
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(bed_capacity)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == bed_capacity, ])
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(140)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 140, ])
+
geom_point(data = baseline_cm(bed_capacity), size = 3, col = "blue")
+
lims(x = c(0, 1))
+
geom_vline(aes(xintercept = ps), data = baseline_cm(bed_capacity))
+
geom_hline(aes(yintercept = du), data = baseline_cm(bed_capacity))
+
labs(#title = "Cumulative mortality at given number of beds",
x = "Probablilty of surving"
, y = "Hospital duration (days)"
, color = "Number of beds")
+
theme_bw()
+
ggeasy::easy_center_title()
)
plot2
plot2 <- (ggplot()
+
aes(x = ps, y = du, z = cm, color = as.character(cc)
)
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(bed_capacity)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == bed_capacity, ])
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(140)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 140, ])
+
geom_point(data = baseline_cm(bed_capacity), size = 3, col = "blue")
+
lims(x = c(0, 1))
+
#geom_vline(aes(xintercept = ps), data = baseline_cm(bed_capacity))
#+
geom_hline(aes(yintercept = du), data = baseline_cm(bed_capacity))
+
labs(#title = "Cumulative mortality at given number of beds",
x = "Probablilty of surving"
, y = "Hospital duration (days)"
, color = "Number of beds")
+
theme_bw()
+
ggeasy::easy_center_title()
)
plot2
plot2 <- (ggplot()
+
aes(x = ps, y = du, z = cm, color = as.character(cc)
)
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(bed_capacity)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == bed_capacity, ])
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(100)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 100, ])
+
geom_point(data = baseline_cm(bed_capacity), size = 3, col = "blue")
+
lims(x = c(0, 1))
+
#geom_vline(aes(xintercept = ps), data = baseline_cm(bed_capacity))
#+
geom_hline(aes(yintercept = du), data = baseline_cm(bed_capacity))
+
labs(#title = "Cumulative mortality at given number of beds",
x = "Probablilty of surving"
, y = "Hospital duration (days)"
, color = "Number of beds")
+
theme_bw()
+
ggeasy::easy_center_title()
)
plot2
plot2 <- (ggplot()
+
aes(x = ps, y = du, z = cm, color = as.character(cc)
)
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(bed_capacity)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == bed_capacity, ])
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(100)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 100, ])
+
geom_point(data = baseline_cm(bed_capacity), size = 3, col = "blue")
+
lims(x = c(0, 1))
+
geom_vline(aes(xintercept = ps), data = baseline_cm(bed_capacity))
+
geom_hline(aes(yintercept = du), data = baseline_cm(bed_capacity))
+
labs(#title = "Cumulative mortality at given number of beds",
x = "Probablilty of surving"
, y = "Hospital duration (days)"
, color = "Number of beds")
+
theme_bw()
+
ggeasy::easy_center_title()
)
plot2
.args <- if(interactive()){
c("./output/sars_cov_2_outputs.RData",  # inputs
"./data/toci_treat.xlsx",
"./figs/sars_cov_2_plot.jpg")  # outputs
}else{
commandArgs(trailingOnly = TRUE)
}
target <- tail(.args, 1)
library(ggplot2)
library(readxl)
library(dplyr)
library(tidyr)
library(patchwork)
load(.args[[1]])
new_out <- baseline_output %>%
pivot_longer(S:CA, values_to = "Count", names_to = "States")
plot1 <- (ggplot(new_out)
+
geom_line(aes(
x = time,
y = Count,
col = States
), size = 1)
+
labs(
x = "Time(days)"
, y = "Population"
, title = "Probability of surviving is 75%, 12 days of hospitalization
with 20 availabe beds in population of 150000 individuals."
)
+
facet_wrap(~States, scales = "free")
+
ggeasy::easy_center_title()
+
theme_bw()
)
bed_capacity <- 20
p1 <- read_xlsx(.args[[2]])
psb1 <- p1$usual_value
names(psb1) <- p1$parms
baseline_cm <- function(bed_cap, psb = .71, dub = 19) cum_mortality_df %>%
filter(ps == psb, du == dub, cc == bed_cap)
plot2 <- (ggplot()
+
aes(x = ps, y = du, z = cm, color = as.character(cc)
)
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(bed_capacity)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == bed_capacity, ])
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(100)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 100, ])
+
geom_point(data = baseline_cm(bed_capacity), size = 3, col = "blue")
+
lims(x = c(0, 1))
+
geom_vline(aes(xintercept = ps), data = baseline_cm(bed_capacity))
+
geom_hline(aes(yintercept = du), data = baseline_cm(bed_capacity))
+
labs(#title = "Cumulative mortality at given number of beds",
x = "Probablilty of surving"
, y = "Hospital duration (days)"
, color = "Number of beds")
+
theme_bw()
+
ggeasy::easy_center_title()
)
if(dir.exists("./figs")){
ggsave(filename = target,
plot = plot2,
width = 8.51,
height = 5.67,
units = "in")
}else{
dir.create("./figs")
ggsave(filename = target,
plot = plot2,
width = 8.51,
height = 5.67,
units = "in")
}
plot2
plot2 <- (ggplot()
+
aes(x = ps, y = du, z = cm, color = as.character(cc)
)
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(bed_capacity)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == bed_capacity, ])
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(100)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 100, ])
+
geom_contour(breaks = c(min(cum_mortality_df$cm),
baseline_cm(140)$cm,
max(cum_mortality_df$cm)),
data = cum_mortality_df[cum_mortality_df$cc == 140, ])
+
geom_point(data = baseline_cm(bed_capacity), size = 3, col = "blue")
+
lims(x = c(0, 1))
+
geom_vline(aes(xintercept = ps), data = baseline_cm(bed_capacity))
+
geom_hline(aes(yintercept = du), data = baseline_cm(bed_capacity))
+
labs(#title = "Cumulative mortality at given number of beds",
x = "Probablilty of surving"
, y = "Hospital duration (days)"
, color = "Number of beds")
+
theme_bw()
+
ggeasy::easy_center_title()
)
plot2
.args <- if(interactive()){
c("./output/sars_cov_2_outputs.RData",  # inputs
"./figs/sars_cov_2_model.jpg")  # outputs
}else{
commandArgs(trailingOnly = TRUE)
}
target <- tail(.args, 1)
library(ggplot2)
library(readxl)
library(dplyr)
library(tidyr)
load(.args[[1]])
new_out <- baseline_output %>%
pivot_longer(S:CA, values_to = "Count", names_to = "States")
new_out
tail(new_out)
plot1 <- (ggplot(new_out)
+
geom_line(aes(
x = time,
y = Count,
col = States
), size = 1)
+
labs(
x = "Time(days)"
, y = "Population"
, title = "Probability of surviving is 75%, 12 days of hospitalization
with 20 availabe beds in population of 150000 individuals."
)
+
facet_wrap(~States, scales = "free")
+
ggeasy::easy_center_title()
+
theme_bw()
)
plot1
plot1 <- (ggplot(new_out)
+
geom_line(aes(
x = time,
y = Count,
col = States
), size = 1)
#+
#labs(
#x = "Time(days)"
#, y = "Population"
#, title = "Probability of surviving is 75%, 12 days of hospitalization
#     with 20 availabe beds in population of 150000 individuals."
#)
+
facet_wrap(~States, scales = "free")
+
ggeasy::easy_center_title()
+
theme_bw()
)
plot1
p1 <- read_xlsx(.args[[2]])
p1 <- read_xlsx(.args[[2]])
.args <- if(interactive()){
c("./output/sars_cov_2_outputs.RData",  # inputs
"./data/toci_treat.xlsx",
"./figs/sars_cov_2_model.jpg")  # outputs
}else{
commandArgs(trailingOnly = TRUE)
}
target <- tail(.args, 1)
library(ggplot2)
library(readxl)
library(dplyr)
library(tidyr)
load(.args[[1]])
p1 <- read_xlsx(.args[[2]])
psb1 <- p1$usual_value
names(psb1) <- p1$parms
psb1
View(cum_mortality_df)
baseline_output
baseline_output
